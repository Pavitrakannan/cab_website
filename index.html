<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Cabs | Professional Services</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="alert-box" onclick="this.style.display='none'">
            {{ messages[0] }} <span style="float:right; cursor:pointer;">&times;</span>
        </div>
      {% endif %}
    {% endwith %}

    <div id="promoPopup" class="popup-overlay">
        <div class="luxury-popup">
            <button class="close-luxury" onclick="closePopup()">×</button>
            <div class="pop-header-row">
                <div class="pop-title-side">
                    <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Agent">
                    <div>
                        <h2 class="pop-sub">Clear your doubts &</h2>
                        <h1 class="pop-main">Get Booking Assistance</h1>
                    </div>
                </div>
                <div class="agent-box">
                    <div class="agent-icon"><i class="fas fa-phone-alt"></i></div>
                    <div class="agent-text">
                        <span>Talk to our agent</span>
                        <strong>0124 - 4781861</strong>
                    </div>
                </div>
            </div>
            <div class="pop-checklist">
                <span><i class="fas fa-check-circle"></i> Get a personalized route plan</span>
                <span><i class="fas fa-check-circle"></i> Best price guarantee</span>
            </div>
            <form action="/book" method="POST" class="pop-action-row">
                <input type="hidden" name="trip_type" value="Call Request">
                <input type="hidden" name="name" value="Popup Request">
                <input type="hidden" name="pickup_state" value="N/A">
                <input type="hidden" name="pickup_address" value="N/A">
                <input type="hidden" name="drop_state" value="N/A">
                <input type="hidden" name="drop_address" value="N/A">
                
                <div class="input-container">
                    <label>Enter your number</label>
                    <input type="tel" name="phone" placeholder="10-digit number" pattern="[0-9]{10}" required>
                </div>
                <button type="submit" class="schedule-btn">Schedule a call</button>
            </form>
            <div class="pop-footer-discount">
                <p>Special discount only for you</p>
                <div class="coupon-bar">
                    <div class="coupon-left">
                        <div class="percent-badge">%</div>
                        <div><strong>₹500 off</strong><span>On first long trip</span></div>
                    </div>
                    <div class="coupon-right">
                        <span class="code-text">GOCABS</span>
                        <button class="copy-btn">COPY</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <nav class="navbar">
        <div class="company-logo-giant">PREMIUM<span class="gold">CABS</span></div>
        <div class="menu">
            <a href="#home">Home</a>
            <a href="#fleet">Our Fleet</a>
            <a href="#guide">How to Book</a>
            <a href="#contact">Contact</a>
        </div>
    </nav>

    <header id="home" class="hero section-margin">
        <div class="hero-content">
            <h1>Reliable Transport Solutions</h1>
            <p>Premium Intercity and Local Cab Services.</p>
            
            <form action="/book" method="POST" class="booking-card">
                
                <div class="form-group full-width">
                    <label>Trip Type <span class="req">*</span></label>
                    <div class="radio-group">
                        <label><input type="radio" name="trip_type" value="Within City" checked onchange="calculateDistance()"> Within City</label>
                        <label><input type="radio" name="trip_type" value="Intercity" onchange="calculateDistance()"> Intercity (Outstation)</label>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Your Name <span class="req">*</span></label>
                        <input type="text" name="name" placeholder="Full Name" required>
                    </div>
                    <div class="form-group">
                        <label>Mobile Number <span class="req">*</span></label>
                        <input type="tel" name="phone" placeholder="10-digit number" pattern="[0-9]{10}" title="Please enter a valid 10-digit mobile number" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Pickup State <span class="req">*</span></label>
                        <select name="pickup_state" id="pickup_state" onchange="calculateDistance()" required>
                            <option value="" disabled selected>Select State</option>
                            <option value="Maharashtra">Maharashtra</option>
                            <option value="Delhi">Delhi</option>
                            <option value="Karnataka">Karnataka</option>
                            <option value="Gujarat">Gujarat</option>
                            <option value="Rajasthan">Rajasthan</option>
                            <option value="Goa">Goa</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Exact Pickup Address <span class="req">*</span></label>
                        <input type="text" name="pickup_address" placeholder="House No, Street, Area" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Drop State <span class="req">*</span></label>
                        <select name="drop_state" id="drop_state" onchange="calculateDistance()" required>
                            <option value="" disabled selected>Select State</option>
                            <option value="Maharashtra">Maharashtra</option>
                            <option value="Delhi">Delhi</option>
                            <option value="Karnataka">Karnataka</option>
                            <option value="Gujarat">Gujarat</option>
                            <option value="Rajasthan">Rajasthan</option>
                            <option value="Goa">Goa</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Exact Drop Address <span class="req">*</span></label>
                        <input type="text" name="drop_address" placeholder="Destination Address" required>
                    </div>
                </div>

                <div id="distance-box" class="distance-info" style="display: none;">
                    <i class="fas fa-road"></i> <span id="dist-text">Calculating...</span>
                </div>

                <button type="submit" class="submit-btn">Complete & Book</button>
            </form>
        </div>
    </header>

    <section id="fleet" class="section section-margin">
        <div class="container">
            <h2 class="side-header-large center">Choose Your <span class="gold">Vehicle</span></h2>
            <div class="fleet-grid">
                {% for car in cars %}
                <div class="fleet-card">
                    <div class="card-img-box">
                        <img src="{{ car.image }}" alt="{{ car.name }}">
                    </div>
                    <div class="card-details">
                        <h3>{{ car.name }}</h3>
                        <p class="model">{{ car.model }}</p>
                        <div class="features">
                            {% for feature in car.features %}
                                <span><i class="fas fa-check"></i> {{ feature }}</span>
                            {% endfor %}
                        </div>
                        <div class="pricing-row">
                            <span class="rate">{{ car.rate }}/km</span>
                            <span class="capacity"><i class="fas fa-user"></i> {{ car.capacity }}</span>
                        </div>
                        
                        <div class="action-buttons">
                            <a href="https://wa.me/917249666740?text=I'm interested in booking the {{ car.name }}" target="_blank" class="book-btn whatsapp-btn">
                                <i class="fab fa-whatsapp"></i> WhatsApp
                            </a>
                            <a href="#home" class="book-btn form-btn">
                                <i class="fas fa-file-alt"></i> Book Here
                            </a>
                        </div>

                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <section id="guide" class="section section-margin">
        <div class="container">
            <h2 class="side-header-large">How to book a cab</h2>
            <div class="flex-row">
                <div class="col-img">
                    <img src="https://images.unsplash.com/photo-1556155092-490a1ba16284?auto=format&fit=crop&w=800&q=80" alt="Booking">
                </div>
                <div class="col-text">
                    <div class="step-card">
                        <span class="step-no">01</span>
                        <div class="step-info">
                            <h3>Enter Trip Details</h3>
                            <p>Select your pickup and drop locations to see estimated distance.</p>
                        </div>
                    </div>
                    <div class="step-card">
                        <span class="step-no">02</span>
                        <div class="step-info">
                            <h3>Select Your Vehicle</h3>
                            <p>Choose from Hatchback, Sedan, or SUV based on your needs.</p>
                        </div>
                    </div>
                    <div class="step-card">
                        <span class="step-no">03</span>
                        <div class="step-info">
                            <h3>Start Your Journey</h3>
                            <p>Our driver will arrive at your pickup location on time.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="contact" class="section dark-bg section-margin">
        <div class="container">
            <h2 class="side-header-large center">Get In <span class="gold">Touch</span></h2>
            <div class="contact-grid-fixed">
                <a href="tel:+917249666740" class="contact-item">
                    <i class="fas fa-phone-alt giant-icon blue"></i>
                    <h2 class="white-header">Call Us</h2>
                    <p>+91 72496 66740</p>
                </a>
                <a href="https://wa.me/917249666740" class="contact-item">
                    <i class="fab fa-whatsapp giant-icon green"></i>
                    <h2 class="white-header">WhatsApp</h2>
                    <p>Instant Chat</p>
                </a>
                <a href="https://instagram.com/premium_cabs_official" target="_blank" class="contact-item">
                    <i class="fab fa-instagram giant-icon insta"></i>
                    <h2 class="white-header">Instagram</h2>
                    <p>@PremiumCabs</p>
                </a>
            </div>
        </div>
    </section>

    <footer class="footer">
        <p>© Copyright 2025 Premium Cabs. All Rights Reserved.</p>
    </footer>

    <script>
        window.onload = function() { setTimeout(() => { document.getElementById('promoPopup').style.display = 'flex'; }, 2000); };
        function closePopup() { document.getElementById('promoPopup').style.display = 'none'; }

        function calculateDistance() {
            const pickup = document.getElementById('pickup_state').value;
            const drop = document.getElementById('drop_state').value;
            const distBox = document.getElementById('distance-box');
            const distText = document.getElementById('dist-text');

            if (pickup && drop) {
                distBox.style.display = 'block';
                if (pickup === drop) {
                    distText.innerHTML = "Approx. Distance: <b>10 - 40 km</b> (City Limits)";
                } else {
                    let randomDist = Math.floor(Math.random() * (600 - 150 + 1)) + 150;
                    distText.innerHTML = `Est. Distance: <b>${randomDist} km</b>`;
                }
            } else {
                distBox.style.display = 'none';
            }
        }
    </script>
</body>
</html>
